<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">
  
  <Button name="DiceMasterRollTrackerButtonTemplate" virtual="true">
		<Size x="276" y="16"/>
		<Layers>
			<Layer level="BORDER">
				<FontString name="$parentName" inherits="GameFontNormalSmall" justifyH="LEFT">
					<Size x="65" y="14"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-3"/>
					</Anchors>
				</FontString>
				<FontString name="$parentRoll" inherits="GameFontHighlightSmall" justifyH="CENTER">
					<Size x="32" y="14"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentName" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentRollType" inherits="GameFontHighlightSmall" justifyH="CENTER">
					<Size x="60" y="14"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRoll" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTimestamp" inherits="GameFontHighlightSmall" justifyH="CENTER">
					<Size x="60" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRollType" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTarget" inherits="GameFontHighlightSmall" justifyH="CENTER">
					<Size x="22" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentTimestamp" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
			</OnLoad>
			<OnClick>
				DiceMasterRollTrackerButton_OnClick(self, button);
				PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</OnClick>
		</Scripts>
		<HighlightTexture name="$parentHighlight" file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD">
			<Size x="276" y="16"/>
			<Anchors>
				<Anchor point="TOPLEFT" x="5" y="-2"/>
			</Anchors>
		</HighlightTexture>
	</Button>
	
	<Button name="DiceMasterRollTrackerHistoryButtonTemplate" virtual="true">
		<Size x="220" y="16"/>
		<Layers>
			<Layer level="BORDER">
				<FontString name="$parentRoll" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="60" y="14"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-3"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTimestamp" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="55" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRoll" relativePoint="RIGHT" x="8" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentType" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="150" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentTimestamp" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
		</Scripts>
		<HighlightTexture file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD">
			<Size x="220" y="16"/>
			<Anchors>
				<Anchor point="LEFT" x="5" y="-2"/>
			</Anchors>
		</HighlightTexture>
	</Button>
	
	<Frame name="DiceMasterRollTrackerDetailFrameTemplate" toplevel="true" enableMouse="true" virtual="true">
		<Size x="250" y="280"/>
		<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background-Dark" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="11" right="11" top="11" bottom="11"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="32"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="32"/>
			</EdgeSize>
		</Backdrop>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="BackBackground" blendMode="ADD">
					<Anchors>
						<Anchor point="TOPLEFT" x="3" y="-5"/>
						<Anchor point="BOTTOMRIGHT" x="-3" y="5"/>
					</Anchors>
					<Color r="0" g="0" b="0" a="0.6"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString parentKey="Name" justifyH="LEFT" inherits="GameFontNormal">
					<Size x="165" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="17" y="-18"/>
					</Anchors>
				</FontString>
				<FontString parentKey="AverageLabel" inherits="GameFontNormalSmall" text="Average Roll:">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Name" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
					</Anchors>
				</FontString>
				<FontString parentKey="AverageText" inherits="GameFontHighlight" justifyH="LEFT" text="--">
					<Size x="147" y="12"/>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.AverageLabel" relativePoint="RIGHT" x="2" y="0"/>
					</Anchors>
				</FontString>
				<FontString parentKey="RollHistoryLabel" inherits="GameFontNormalSmall" text="Roll">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.AverageLabel" relativePoint="BOTTOMLEFT" x="4" y="-13"/>
					</Anchors>
				</FontString>
				<FontString parentKey="TimestampHistoryLabel" inherits="GameFontNormalSmall" text="Time">
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.RollHistoryLabel" relativePoint="RIGHT" x="50" y="0"/>
					</Anchors>
				</FontString>
				<FontString parentKey="TypeHistoryLabel" inherits="GameFontNormalSmall" text="Type">
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.TimestampHistoryLabel" relativePoint="RIGHT" x="28" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="Corner" file="Interface\DialogFrame\UI-DialogBox-Corner">
					<Size x="32" y="32"/>
					<Anchors>
						<Anchor point="TOPRIGHT" x="-6" y="-7"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT" x="-3" y="-3"/>
				</Anchors>
				<Scripts>
					<OnClick>
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						HideParentPanel(self);
					</OnClick>
				</Scripts>
			</Button>
			<Frame parentKey="ListInset" inherits="InsetFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" x="12" y="-72"/>
					<Anchor point="BOTTOMRIGHT" x="-12" y="55"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<FontString parentKey="Totals" inherits="GameFontNormalSmall">
							<Size x="150" y="16"/>
							<Anchors>
								<Anchor point="BOTTOM" x="0" y="5"/>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
			<ScrollFrame name="$parentDetailScrollFrame" inherits="FauxScrollFrameTemplate">
				<Size x="150" y="142"/>
				<Anchors>
					<Anchor point="TOPRIGHT" x="-38" y="-80"/>
				</Anchors>
				<Scripts>
					<OnVerticalScroll>
						FauxScrollFrame_OnVerticalScroll(self, offset, 16, DiceMaster4.DiceMasterRollDetailFrame_Update);
					</OnVerticalScroll>
				</Scripts>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
							<Size x="31" y="115"/>
							<Anchors>
								<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-2" y="5"/>
							</Anchors>
							<TexCoords left="0" right="0.484375" top="0" bottom="0.5"/>
						</Texture>
						<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
							<Size x="31" y="106"/>
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="-2" y="-2"/>
							</Anchors>
							<TexCoords left="0.515625" right="1.0" top="0" bottom="0.4140625"/>
						</Texture>
					</Layer>
				</Layers>
			</ScrollFrame>
			<Button parentKey="RemoveButton" inherits="UIPanelButtonTemplate" text="Clear">
				<Size x="110" y="22"/>
				<Anchors>
					<Anchor point="BOTTOMLEFT" x="15" y="32"/>
				</Anchors>
				<Scripts>
					<OnClick>
						DiceMaster4.HistoryRolls[DiceMasterRollFrame.DetailFrame.name] = {}
						DiceMaster4.DiceMasterRollDetailFrame_Update()
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalFont style="GameFontNormalSmall"/>
				<HighlightFont style="GameFontHighlightSmall"/>
				<DisabledFont style="GameFontDisableSmall"/>
			</Button>
			<Button parentKey="MessageButton" inherits="UIPanelButtonTemplate" text="Send Message">
				<Size x="110" y="22"/>
				<Anchors>
					<Anchor point="LEFT" relativeKey="$parent.RemoveButton" relativePoint="RIGHT" x="1" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						ChatFrame_SendTell(DiceMasterRollTracker.selectedName);
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalFont style="GameFontNormalSmall"/>
				<HighlightFont style="GameFontHighlightSmall"/>
				<DisabledFont style="GameFontDisableSmall"/>
			</Button>
			<Button parentKey="ExperienceButton" inherits="UIPanelButtonTemplate" text="Send Personal Banner...">
				<Size x="220" y="22"/>
				<Anchors>
					<Anchor point="BOTTOM" x="0" y="12"/>
				</Anchors>
				<Scripts>
					<OnClick>
						if DiceMaster4.IsLeader( false ) then
							DiceMasterBannerPromptDialog:Show()	PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						end
					</OnClick>
					<OnUpdate>
						if DiceMaster4.IsLeader( false ) and DiceMaster4.PermittedUse() then
							self:Enable()
						else
							self:Disable()
						end
					</OnUpdate>
				</Scripts>
				<NormalFont style="GameFontNormalSmall"/>
				<HighlightFont style="GameFontHighlightSmall"/>
				<DisabledFont style="GameFontDisableSmall"/>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				for i = 2, 9 do
					local button = CreateFrame("Button", "DiceMasterRollTrackerHistoryButton"..i, self, "DiceMasterRollTrackerHistoryButtonTemplate");
					button:SetID(i)
					button:SetPoint("TOP", _G["DiceMasterRollTrackerHistoryButton"..(i-1)], "BOTTOM");
				end
			</OnLoad>
			<OnShow>
				DiceMaster4.DiceMasterRollDetailFrame_Update()
			</OnShow>
			<OnHide>
				DiceMasterRollTracker.selected = nil
				DiceMaster4.DiceMasterRollFrame_Update()
			</OnHide>
		</Scripts>
	</Frame>
  
   <Button name="DiceMasterDMExperienceButtonTemplate" virtual="true">
		<Size x="240" y="20"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentBackground" file="Interface\PaperDollInfoFrame\UI-Character-ReputationBar">
					<Size x="0" y="21"/>
					<Anchors>
						<Anchor point="LEFT">
							<Offset x="0" y="0"/>
						</Anchor>
					</Anchors>
					<TexCoords left="0.0" right="0.7578125" top="0.0" bottom="0.328125"/>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<FontString name="$parentName" inherits="GameFontNormalSmall" justifyH="LEFT">
					<Size x="78" y="10"/>
					<Anchors>
						<Anchor point="LEFT" x="25" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton name="$parentCheck" parentKey="check" inherits="UICheckButtonTemplate">
				<Size x="20" y="20"/>
				<Anchors>
				  <Anchor point="LEFT" x="2" y="0"/>
				</Anchors>
				
				<Scripts>
					<OnLoad>
					</OnLoad>
					<OnClick>
						DiceMaster4.DMExperienceButton_OnClick(self)
					</OnClick>
				</Scripts>
			</CheckButton>
			
			<StatusBar name="$parentExperienceBar" drawLayer="BORDER" minValue="0" maxValue="100" defaultValue="0">
				<Size x="101" y="13"/>
				<Anchors>
					<Anchor point="RIGHT" x="0" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture name="$parentLeftTexture" file="Interface\PaperDollInfoFrame\UI-Character-ReputationBar">
							<Size x="60" y="21"/>
							<Anchors>
								<Anchor point="LEFT" x="0" y="0"/>
							</Anchors>
							<TexCoords left="0.7578125" right="1.0" top="0" bottom="0.328125"/>
						</Texture>
						<Texture name="$parentRightTexture" file="Interface\PaperDollInfoFrame\UI-Character-ReputationBar">
							<Size x="42" y="21"/>
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentLeftTexture" relativePoint="RIGHT" x="0" y="0"/>
							</Anchors>
							<TexCoords left="0.0" right="0.1640625" top="0.34375" bottom="0.671875"/>
						</Texture>
						<FontString name="$parentText" inherits="GameFontHighlightSmall" text="Level 1">
							<Anchors>
								<Anchor point="CENTER" x="0" y="0"/>
							</Anchors>
						</FontString>
					</Layer>
					<Layer level="OVERLAY">
						<Texture name="$parentHighlight2" file="Interface\PaperDollInfoFrame\UI-Character-ReputationBar-Highlight" alphaMode="ADD" hidden="true">
							<Size x="17" y="28"/>
							<Anchors>
								<Anchor point="RIGHT">
									<Offset x="4" y="0"/>
								</Anchor>
							</Anchors>
							<TexCoords left="0" right="0.06640625" top="0.4375" bottom="0.875"/>
						</Texture>
						<Texture name="$parentHighlight1" file="Interface\PaperDollInfoFrame\UI-Character-ReputationBar-Highlight" alphaMode="ADD" hidden="true">
							<Size x="0" y="28"/>
							<Anchors>
								<Anchor point="RIGHT" relativeTo="$parentHighlight2" relativePoint="LEFT"/>
							</Anchors>
							<TexCoords left="0" right="1" top="0" bottom="0.4375"/>
						</Texture>
					</Layer>
				</Layers>
				<BarTexture file="Interface\PaperDollInfoFrame\UI-Character-Skills-Bar"/>
				<BarColor r=".25" g=".25" b=".75"/>
			</StatusBar>
		</Frames>
		<Scripts>
			<OnLoad>
				_G[self:GetName().."ExperienceBarHighlight1"]:SetPoint("TOPLEFT",self,"TOPLEFT",-2, 4);
				_G[self:GetName().."ExperienceBarHighlight1"]:SetPoint("BOTTOMRIGHT",self,"BOTTOMRIGHT",-10, -4);
				_G[self:GetName().."Background"]:SetPoint("TOPRIGHT", self:GetName().."ExperienceBarLeftTexture", "TOPLEFT", 0, 0);
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
			</OnLoad>
			<OnEnter>
				_G[self:GetName().."ExperienceBarText"]:SetText(_G[self:GetName().."ExperienceBar"]:GetValue().." / 100");
				_G[self:GetName().."ExperienceBarHighlight1"]:Show();
				_G[self:GetName().."ExperienceBarHighlight2"]:Show();
			</OnEnter>
			<OnLeave>
				_G[self:GetName().."ExperienceBarText"]:SetText("Level "..self.level);
				_G[self:GetName().."ExperienceBarHighlight1"]:Hide();
				_G[self:GetName().."ExperienceBarHighlight2"]:Hide();
			</OnLeave>
		</Scripts>
	</Button>
  
  <Frame name="DiceMasterRollFrame" parent="UIParent" inherits="PortraitFrameTemplate" hidden="true" framestrata="HIGH">
    <Size x="285" y="384" />
    <Anchors>
      <Anchor point="LEFT" x="300" y="100" />
    </Anchors>
    
    <Scripts>
      <OnLoad>
		DiceMaster4.DiceMasterRollFrame_OnLoad( self )
		PanelTemplates_SetNumTabs(self, 3);
	    PanelTemplates_SetTab(self, 1);
	  </OnLoad>
	  <OnShow>
		PlaySound(839)
		if not DiceMaster4.db.global.hideTracker then
			DiceMaster4.db.global.hideTracker = true
		end
	  </OnShow>
	  <OnHide>
		PlaySound(840)
		if DiceMaster4.db.global.hideTracker then
			DiceMaster4.db.global.hideTracker = false
		end
	  </OnHide>
    </Scripts>
    <Frames>
		<Frame name="DiceMasterRollTracker" setAllPoints="true" hidden="false">
			<Frames>
				<Frame name="DiceMasterRollTrackerListInset" inherits="InsetFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-80"/>
						<Anchor point="BOTTOMRIGHT" x="-5" y="26"/>
					</Anchors>
					<Layers>
						<Layer level="ARTWORK">
							<FontString name="DiceMasterRollTrackerTotals" inherits="GameFontNormalSmall">
								<Size x="298" y="16"/>
								<Anchors>
									<Anchor point="BOTTOM" x="0" y="5"/>
								</Anchors>
							</FontString>
						</Layer>
					</Layers>
				</Frame>
				
				<!-- Target Selector -->
				<Button name="$parentSelectTarget" parentKey="selectTarget" enableMouse="true" inherits="UIDropDownMenuTemplate">
					<Size x="32" y="22"/>
					<Anchors>
					  <Anchor point="TOPLEFT" relativeTo="DiceMasterRollTracker" relativePoint="TOPLEFT" x="42" y="-26"/> 
					</Anchors>
					<Scripts>
					  <OnLoad>
						UIDropDownMenu_Initialize( self, DiceMaster4.RollTargetDropDown_OnLoad )
						UIDropDownMenu_SetText(DiceMasterRollTracker.selectTarget, "") 
						UIDropDownMenu_SetWidth(self, 32, 5)
					  </OnLoad>
					</Scripts>
				</Button>
				
				<EditBox name="$parentDCThreshold" parentKey="DCThreshold" font="GameFontNormalMed2" inherits="InputBoxTemplate">
					<Size x="30" y="12"/> 
					<Anchors>
					  <Anchor point="TOPRIGHT" relativeTo="DiceMasterRollTracker" relativePoint="TOPRIGHT" x="-16" y="-34"/> 
					</Anchors>
					<Layers>
						<Layer level="ARTWORK">
					  <FontString name="$parentDCThresholdTitle" inherits="GameFontNormalLeft" justifyH="left" text="Difficulty Class:">
							<Size x="100" y="12"/>
							<Anchors>
							  <Anchor point="RIGHT" relativePoint="LEFT" x="0" y="0"/> 
							</Anchors>
						</FontString>
					  </Layer>
					</Layers>
					<Scripts> 
					  <OnLoad>
						self:SetAutoFocus( false )
						self:SetTextColor( 1, 1, 1 )
						self:SetMaxLetters( 3 )
						self:SetNumeric( true )
					  </OnLoad>
					  <OnTextChanged>
						DiceMaster4.DiceMasterRollFrame_Update()
						DiceMaster4.DiceMasterRollDetailFrame_Update()
					  </OnTextChanged>
					  <OnEscapePressed function="EditBox_ClearFocus"/>
					  <OnEnterPressed function="EditBox_ClearFocus"/>
					</Scripts>
				</EditBox>

				<Button name="RollTrackerColumnHeader1" inherits="WhoFrameColumnHeaderTemplate" text="Name">
					<Anchors>
						<Anchor point="TOPLEFT" x="7" y="-57"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 73);
							self.sortType = "name";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader2" inherits="WhoFrameColumnHeaderTemplate" text="Roll">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader1" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 32);
							self.sortType = "roll";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader3" inherits="WhoFrameColumnHeaderTemplate" text="Type">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader2" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 60);
							self.sortType = "rollType";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader4" inherits="WhoFrameColumnHeaderTemplate" text="Time">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader3" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 60);
							self.sortType = "time";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader5" inherits="WhoFrameColumnHeaderTemplate" text="">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader4" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 32);
							self.sortType = "target";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="DiceMasterRollTrackerButton1" inherits="DiceMasterRollTrackerButtonTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="DiceMasterRollTracker" x="2" y="-82"/>
						</Anchors>
				</Button>
				
				<Button name="$parentBannerButton" inherits="UIPanelButtonTemplate" text="Send Banner...">
					<Size x="150" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-6" y="4"/>
					</Anchors>
					<Scripts>
						<OnClick>
							if DiceMaster4.IsLeader( false ) then
								DiceMasterBannerPromptDialog:Show()
							end
						</OnClick>
						<OnUpdate>
							if DiceMaster4.IsLeader( false ) and DiceMaster4.PermittedUse() then
								self:Enable()
							else
								self:Disable()
							end
						</OnUpdate>
					</Scripts>
				</Button>
				
				<Button name="$parentRefreshButton" inherits="UIPanelButtonTemplate" text="Clear">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeTo="DiceMasterRollFrame" x="4" y="4"/>
					</Anchors>
					<Scripts>
						<OnClick>
							DiceMaster4.SavedRolls = {}
							DiceMasterRollTracker.selected = nil;
							DiceMaster4.DiceMasterRollFrame_Update()
							DiceMasterRollFrame.DetailFrame:Hide()
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<ScrollFrame name="$parentScrollFrame" inherits="FauxScrollFrameTemplate">
					<Size x="256" y="270"/>
					<Anchors>
						<Anchor point="TOPRIGHT" relativeTo="DiceMasterRollTracker" relativePoint="TOPRIGHT" x="-33" y="-87"/>
					</Anchors>
					<Scripts>
						<OnVerticalScroll>
							FauxScrollFrame_OnVerticalScroll(self, offset, 16, DiceMaster4.DiceMasterRollFrame_Update);
						</OnVerticalScroll>
					</Scripts>
					<Layers>
						<Layer level="BORDER">
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="256"/>
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-2" y="5"/>
								</Anchors>
								<TexCoords left="0" right="0.484375" top="0" bottom="1.0"/>
							</Texture>
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="106"/>
								<Anchors>
									<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="-2" y="-2"/>
								</Anchors>
								<TexCoords left="0.515625" right="1.0" top="0" bottom="0.4140625"/>
							</Texture>
						</Layer>
					</Layers>
				</ScrollFrame>

			</Frames>
			<Scripts>
				<OnLoad>
				</OnLoad>
			</Scripts>
		</Frame>
		
		<Frame name="DiceMasterDMNotes" setAllPoints="true" hidden="true">
			<Frames>
				<Frame name="DiceMasterDMNotesInset" inherits="InsetFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-60"/>
						<Anchor point="BOTTOMRIGHT" x="-5" y="26"/>
					</Anchors>
				</Frame>
				
				<CheckButton name="$parentAllowAssistants" parentKey="AllowAssistants" inherits="UICheckButtonTemplate">
					<Size x="24" y="24"/>
					<Anchors>
					  <Anchor point="TOPLEFT" x="58" y="-22"/>
					</Anchors>
					
					<Scripts>
						<OnLoad>
							_G[self:GetName().."Text"]:SetText("|cFFFFD100Allow Raid Assistants to Edit")
							self:Hide()
						</OnLoad>
						<OnClick>
							if DiceMaster4.IsLeader() then
								DiceMaster4.RollTracker_ShareNoteWithParty()
							end
						</OnClick>
					</Scripts>
				</CheckButton>
				
				<ScrollFrame name="$parentDMNotes" parentKey="DMNotes" inherits="UIPanelScrollFrameTemplate2">
					<KeyValues>
						<KeyValue key="safeLength" value="4000" type="number"/>
					</KeyValues>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-65"/>
						<Anchor point="BOTTOMRIGHT" x="-10" y="30"/>
					</Anchors>
					<Scripts>
					  <OnLoad>
						self.ScrollBar:ClearAllPoints()
						self.ScrollBar:SetPoint("TOPLEFT", self, "TOPRIGHT", -13, -11)
						self.ScrollBar:SetPoint("BOTTOMLEFT", self, "BOTTOMRIGHT", -13, 9)
						self.ScrollBar.ScrollDownButton:SetPoint("TOP", self.ScrollBar, "BOTTOM", 0, 4)
						self.ScrollBar.ScrollUpButton:SetPoint("BOTTOM", self.ScrollBar, "TOP", 0, -4)
						self.ScrollBar.ScrollUpButton:Disable()
						self.ScrollBar.ScrollDownButton:Disable()
					  </OnLoad>
					  <OnMouseDown>
						if self.EditBox then
							self.EditBox:SetFocus()
							self.EditBox:SetCursorPosition(#self.EditBox:GetText())
						end
					  </OnMouseDown>
					</Scripts>
					<ScrollChild>
					  <EditBox parentKey="EditBox" multiLine="true" font="GameFontHighlightSmall2">
						<Size x="240" y="12"/>
						<Anchors>
						  <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="5" y="5"/>  
						</Anchors>
						<Layers>
							<Layer level="BORDER">
								<FontString parentKey="Instructions" inherits="GameFontWhite" justifyH="LEFT" justifyV="TOP">
									<Anchors>
										<Anchor point="TOPLEFT"/>
										<Anchor point="RIGHT"/>
										<Anchor point="BOTTOM" relativeKey="$parent.$parent"/>
									</Anchors>
									<Color r="0.5" g="0.5" b="0.5"/>
								</FontString>
							</Layer>
						</Layers>
						<Scripts>
						  <OnLoad>
							self:SetAutoFocus( false )
							self:GetParent():SetScrollChild( self )
							self:SetMaxLetters( 4000 )
							self:Disable()
							self.Instructions:SetText("Record public notes here that the rest of your group can see. Only the group leader can edit these notes.|n|nEnable the option above to grant raid assistants editing privileges.")
						  </OnLoad>
						  <OnEditFocusGained function="DiceMasterNotesEditBox_OnEditFocusGained"/>
						  <OnEditFocusLost function="DiceMasterNotesEditBox_OnEditFocusLost"/>
						  <OnTextChanged function="DiceMasterNotesEditBox_OnTextChanged"/>
						  <OnCursorChanged function="ScrollingEdit_OnCursorChanged"/>
						  <OnUpdate function="ScrollingEdit_OnUpdate"/>
						  <OnEscapePressed function="EditBox_ClearFocus"/>
						</Scripts>
					  </EditBox>
					</ScrollChild>
				</ScrollFrame>
				
				<Button name="$parentClearButton" inherits="UIPanelButtonTemplate" text="Clear">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-6" y="4"/>
					</Anchors>
					<Scripts>
						<OnClick>
							self:GetParent().DMNotes.EditBox:SetText("")
							self:GetParent().DMNotes.EditBox:ClearFocus()
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
						<OnUpdate>
							if DiceMaster4.IsLeader() then
								self:Enable()
							else
								self:Disable()
							end
						</OnUpdate>
					</Scripts>
				</Button>

			</Frames>
			<Scripts>
				<OnLoad>
				</OnLoad>
			</Scripts>
		</Frame>
		
		<Frame name="DiceMasterDMExp" setAllPoints="true" hidden="true">
			<Frames>
				<Frame name="DiceMasterDMExpInset" parentKey="inset" inherits="InsetFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-60"/>
						<Anchor point="BOTTOMRIGHT" x="-5" y="26"/>
					</Anchors>
					<Layers>
						<Layer level="BORDER">
							<FontString parentKey="Text" inherits="GameFontWhite" justifyH="LEFT" justifyV="TOP">
								<Anchors>
									<Anchor point="TOPLEFT" x="10" y="-10"/>
									<Anchor point="BOTTOMRIGHT" x="-10" y="10"/>
								</Anchors>
								<Color r="1" g="1" b="1"/>
							</FontString>
						</Layer>
					</Layers>
				</Frame>
				
				<CheckButton name="$parentCheckAll" parentKey="checkAll" inherits="UICheckButtonTemplate">
					<Size x="24" y="24"/>
					<Anchors>
					  <Anchor point="TOPLEFT" x="58" y="-22"/>
					</Anchors>
					
					<Scripts>
						<OnUpdate>
							if not UnitIsGroupLeader("player", 1) then
								self:Disable()
								_G[self:GetName().."Text"]:SetVertexColor(0.5,0.5,0.5)
							else	
								self:Enable()
								_G[self:GetName().."Text"]:SetVertexColor(1,0.81,0)
							end
						</OnUpdate>
						<OnLoad>
							_G[self:GetName().."Text"]:SetText("All")
						</OnLoad>
						<OnClick>
							DiceMaster4.DMExperienceButton_OnClick(self, true)
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</CheckButton>
				
				<Button name="DiceMasterDMExpButton1" inherits="DiceMasterDMExperienceButtonTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="DiceMasterDMExp" x="10" y="-68"/>
						</Anchors>
				</Button>
				
				<ScrollFrame name="$parentScrollFrame" inherits="FauxScrollFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="DiceMasterDMExpInset" relativePoint="TOPLEFT" x="0" y="-6"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="DiceMasterDMExpInset" relativePoint="BOTTOMRIGHT" x="-25" y="0"/>
					</Anchors>
					<Scripts>
						<OnVerticalScroll>
							FauxScrollFrame_OnVerticalScroll(self, offset, 16, DiceMaster4.DMExperienceFrame_Update);
						</OnVerticalScroll>
					</Scripts>
					<Layers>
						<Layer level="BORDER">
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="256"/>
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-2" y="5"/>
								</Anchors>
								<TexCoords left="0" right="0.484375" top="0" bottom="1.0"/>
							</Texture>
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="106"/>
								<Anchors>
									<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="-2" y="-2"/>
								</Anchors>
								<TexCoords left="0.515625" right="1.0" top="0" bottom="0.4140625"/>
							</Texture>
						</Layer>
					</Layers>
				</ScrollFrame>
				
				<Button name="$parentGrantExpButton" inherits="UIPanelButtonTemplate" text="Grant XP...">
					<Size x="92" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="6" y="4"/>
					</Anchors>
					<Scripts>
						<OnUpdate>
							if #DiceMasterDMExp.selected == 0 then
								self:Disable()
							elseif UnitIsGroupLeader("player", 1) then		
								self:Enable()
							end
						</OnUpdate>
						<OnClick>
							StaticPopup_Show("DICEMASTER4_GRANTEXPERIENCE")
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="$parentGrantLevelButton" inherits="UIPanelButtonTemplate" text="Grant Level...">
					<Size x="92" y="22"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentGrantExpButton" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnUpdate>
							if #DiceMasterDMExp.selected == 0 then
								self:Disable()
							elseif UnitIsGroupLeader("player", 1) then	
								self:Enable()
							end
						</OnUpdate>
						<OnClick>
							StaticPopup_Show("DICEMASTER4_GRANTLEVEL")
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="$parentResetLevelButton" inherits="UIPanelButtonTemplate" text="Reset Level">
					<Size x="92" y="22"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentGrantLevelButton" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnUpdate>
							if #DiceMasterDMExp.selected == 0 then
								self:Disable()
							elseif UnitIsGroupLeader("player", 1) then	
								self:Enable()
							end
						</OnUpdate>
						<OnClick>
							StaticPopup_Show("DICEMASTER4_LEVELRESETATTEMPT")
						</OnClick>
					</Scripts>
				</Button>

			</Frames>
			<Scripts>
				<OnLoad>
					self.inset.Text:SetText("|cFFffd100While in a group, you can view the level and experience values of all group members.|r|n|n- The group leader can grant experiences and levels to the players selected from this list using the buttons below.|n|n- The group leader cannot grant themselves experience or levels.|n|n- Once a player reaches 100 experience, they advance to the next level.")
				</OnLoad>
				<OnShow>
					DiceMaster4.DMExperienceFrame_OnShow()
				</OnShow>
			</Scripts>
		</Frame>
		
		<Button name="$parentTab1" parentKey="Tab1" useParentLevel="true" inherits="CharacterFrameTabButtonTemplate" id="1" text="Roll Tracker">
			<Anchors>
				<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" y="2"/>
			</Anchors>
			<Scripts>
				<OnClick>
					PanelTemplates_SetTab(DiceMasterRollFrame, 1);
                    DiceMasterRollTracker:Show();
                    DiceMasterDMNotes:Hide();
					DiceMasterDMExp:Hide();
					PlaySound(841)
				</OnClick>
			</Scripts>
		</Button>
		
		<Button name="$parentTab2" parentKey="Tab2" useParentLevel="true" inherits="CharacterFrameTabButtonTemplate" id="2" text="Notes">
			<Anchors>
				<Anchor point="LEFT" relativeKey="$parent.Tab1" relativePoint="RIGHT" x="-16"/>
			</Anchors>
			<Scripts>
				<OnClick>
					PanelTemplates_SetTab(DiceMasterRollFrame, 2);
                    DiceMasterRollTracker:Hide();
                    DiceMasterDMNotes:Show();
					DiceMasterDMExp:Hide();
					PlaySound(841)
				</OnClick>
			</Scripts>
		</Button>
		
		<Button name="$parentTab3" parentKey="Tab3" useParentLevel="true" inherits="CharacterFrameTabButtonTemplate" id="3" text="Experience">
			<Anchors>
				<Anchor point="LEFT" relativeKey="$parent.Tab2" relativePoint="RIGHT" x="-16"/>
			</Anchors>
			<Scripts>
				<OnClick>
					PanelTemplates_SetTab(DiceMasterRollFrame, 3);
                    DiceMasterRollTracker:Hide();
                    DiceMasterDMNotes:Hide();
					DiceMasterDMExp:Show();
					PlaySound(841)
				</OnClick>
			</Scripts>
		</Button>
	
		<Frame parentKey="DetailFrame" frameLevel="100" inherits="DiceMasterRollTrackerDetailFrameTemplate" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" x="-8" y="-76"/>
				</Anchors>
				<Frames>
					<Button name="DiceMasterRollTrackerHistoryButton1" inherits="DiceMasterRollTrackerHistoryButtonTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeKey="$parentKey.DetailFrame" x="12" y="-75"/>
						</Anchors>
					</Button>
				</Frames>
		</Frame>
		
		<Button name="DiceMasterRollFrameOpen">
			<Scripts>
				<OnClick>
					if DiceMasterRollFrame:IsShown() then
						DiceMasterRollFrame:Hide()
					else
						DiceMasterRollFrame:Show()
					end
				</OnClick>
			</Scripts>
		</Button>
	
	</Frames>
</Frame>
</Ui>
