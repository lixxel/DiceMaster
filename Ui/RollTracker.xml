<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">
  
  <Button name="DiceMasterRollTrackerButtonTemplate" virtual="true">
		<Size x="256" y="16"/>
		<Layers>
			<Layer level="BORDER">
				<FontString name="$parentName" inherits="GameFontNormalSmall" justifyH="LEFT">
					<Size x="88" y="14"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-3"/>
					</Anchors>
				</FontString>
				<FontString name="$parentRoll" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="32" y="14"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentName" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTimestamp" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="75" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRoll" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTarget" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="32" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentTimestamp" relativePoint="RIGHT" x="8" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
			</OnLoad>
			<OnClick>
				DiceMasterRollTrackerButton_OnClick(self, button);
				PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</OnClick>
		</Scripts>
		<HighlightTexture name="$parentHighlight" file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD">
			<Size x="256" y="16"/>
			<Anchors>
				<Anchor point="TOPLEFT" x="5" y="-2"/>
			</Anchors>
		</HighlightTexture>
	</Button>
	
	<Button name="DiceMasterRollTrackerHistoryButtonTemplate" virtual="true">
		<Size x="150" y="16"/>
		<Layers>
			<Layer level="BORDER">
				<FontString name="$parentRoll" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="26" y="14"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-3"/>
					</Anchors>
				</FontString>
				<FontString name="$parentTimestamp" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="75" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRoll" relativePoint="RIGHT" x="8" y="0"/>
					</Anchors>
				</FontString>
				<FontString name="$parentDice" inherits="GameFontHighlightSmall" justifyH="LEFT">
					<Size x="50" y="8"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentTimestamp" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
		</Scripts>
		<HighlightTexture file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD">
			<Size x="150" y="16"/>
			<Anchors>
				<Anchor point="TOP" x="5" y="-2"/>
			</Anchors>
		</HighlightTexture>
	</Button>
	
	<Frame name="DiceMasterRollTrackerDetailFrameTemplate" toplevel="true" enableMouse="true" virtual="true">
		<Size x="212" y="270"/>
		<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background-Dark" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="11" right="11" top="11" bottom="11"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="32"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="32"/>
			</EdgeSize>
		</Backdrop>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="BackBackground" blendMode="ADD">
					<Anchors>
						<Anchor point="TOPLEFT" x="3" y="-5"/>
						<Anchor point="BOTTOMRIGHT" x="-3" y="5"/>
					</Anchors>
					<Color r="0" g="0" b="0" a="0.6"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString parentKey="Name" justifyH="LEFT" inherits="GameFontNormal">
					<Size x="165" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="17" y="-18"/>
					</Anchors>
				</FontString>
				<FontString parentKey="AverageLabel" inherits="GameFontNormalSmall" text="Average Roll:">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Name" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
					</Anchors>
				</FontString>
				<FontString parentKey="AverageText" inherits="GameFontHighlight" justifyH="LEFT" text="--">
					<Size x="147" y="12"/>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.AverageLabel" relativePoint="RIGHT" x="2" y="0"/>
					</Anchors>
				</FontString>
				<FontString parentKey="RollHistoryLabel" inherits="GameFontNormalSmall" text="Roll">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.AverageLabel" relativePoint="BOTTOMLEFT" x="4" y="-13"/>
					</Anchors>
				</FontString>
				<FontString parentKey="TimestampHistoryLabel" inherits="GameFontNormalSmall" text="Timestamp">
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.RollHistoryLabel" relativePoint="RIGHT" x="16" y="0"/>
					</Anchors>
				</FontString>
				<FontString parentKey="DiceHistoryLabel" inherits="GameFontNormalSmall" text="Dice">
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.TimestampHistoryLabel" relativePoint="RIGHT" x="18" y="0"/>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="Corner" file="Interface\DialogFrame\UI-DialogBox-Corner">
					<Size x="32" y="32"/>
					<Anchors>
						<Anchor point="TOPRIGHT" x="-6" y="-7"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT" x="-3" y="-3"/>
				</Anchors>
				<Scripts>
					<OnClick>
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						HideParentPanel(self);
					</OnClick>
				</Scripts>
			</Button>
			<Frame parentKey="ListInset" inherits="InsetFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" x="12" y="-72"/>
					<Anchor point="BOTTOMRIGHT" x="-12" y="45"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<FontString parentKey="Totals" inherits="GameFontNormalSmall">
							<Size x="150" y="16"/>
							<Anchors>
								<Anchor point="BOTTOM" x="0" y="5"/>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
			<ScrollFrame name="$parentDetailScrollFrame" inherits="FauxScrollFrameTemplate">
				<Size x="150" y="142"/>
				<Anchors>
					<Anchor point="TOPRIGHT" x="-38" y="-80"/>
				</Anchors>
				<Scripts>
					<OnVerticalScroll>
						FauxScrollFrame_OnVerticalScroll(self, offset, 16, DiceMaster4.DiceMasterRollDetailFrame_Update);
					</OnVerticalScroll>
				</Scripts>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
							<Size x="31" y="115"/>
							<Anchors>
								<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-2" y="5"/>
							</Anchors>
							<TexCoords left="0" right="0.484375" top="0" bottom="0.5"/>
						</Texture>
						<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
							<Size x="31" y="106"/>
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="-2" y="-2"/>
							</Anchors>
							<TexCoords left="0.515625" right="1.0" top="0" bottom="0.4140625"/>
						</Texture>
					</Layer>
				</Layers>
			</ScrollFrame>
			<Button parentKey="RemoveButton" inherits="UIPanelButtonTemplate" text="Clear">
				<Size x="96" y="22"/>
				<Anchors>
					<Anchor point="BOTTOMLEFT" x="10" y="12"/>
				</Anchors>
				<Scripts>
					<OnClick>
						DiceMaster4.HistoryRolls[self:GetParent().Name:GetText()] = {}
						DiceMaster4.DiceMasterRollDetailFrame_Update()
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalFont style="GameFontNormalSmall"/>
				<HighlightFont style="GameFontHighlightSmall"/>
				<DisabledFont style="GameFontDisableSmall"/>
			</Button>
			<Button parentKey="MessageButton" inherits="UIPanelButtonTemplate" text="Send Message">
				<Size x="96" y="22"/>
				<Anchors>
					<Anchor point="LEFT" relativeKey="$parent.RemoveButton" relativePoint="RIGHT" x="1" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						ChatFrame_SendTell(DiceMasterRollTracker.selectedName);
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalFont style="GameFontNormalSmall"/>
				<HighlightFont style="GameFontHighlightSmall"/>
				<DisabledFont style="GameFontDisableSmall"/>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				for i = 2, 9 do
					local button = CreateFrame("Button", "DiceMasterRollTrackerHistoryButton"..i, self, "DiceMasterRollTrackerHistoryButtonTemplate");
					button:SetID(i)
					button:SetPoint("TOP", _G["DiceMasterRollTrackerHistoryButton"..(i-1)], "BOTTOM");
				end
			</OnLoad>
			<OnShow>
				DiceMaster4.DiceMasterRollDetailFrame_Update()
			</OnShow>
			<OnHide>
				DiceMasterRollTracker.selected = nil
				DiceMaster4.DiceMasterRollFrame_Update()
			</OnHide>
		</Scripts>
	</Frame>
  
  <Frame name="DiceMasterRollBanner" parent="UIParent" hidden="true" alpha="1">
	<Size x="128" y="156"/>
	<Anchors>
		<Anchor point="TOP" x="0" y="-120"/>
	</Anchors>
	<Layers>
		<Layer level="BORDER">
			<Texture parentKey="BannerTop" hidden="false" alpha="0" alphaMode="BLEND" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="440" y="112"/>
				<TexCoords left="0.001953125" right="0.861328125" top="0.224609375" bottom="0.443359375"/>
				<Anchors>
					<Anchor point="TOP" x="0" y="-44"/>
				</Anchors>
			</Texture>
			<Texture parentKey="BannerTopGlow" hidden="false" alpha="0" alphaMode="ADD" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="440" y="112"/>
				<TexCoords left="0.001953125" right="0.861328125" top="0.224609375" bottom="0.443359375"/>
				<Anchors>
					<Anchor point="TOP" x="0" y="-44"/>
				</Anchors>
			</Texture>
			<Texture parentKey="BannerBottom" hidden="false" alpha="0" alphaMode="BLEND" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="440" y="112"/>
				<TexCoords left="0.001953125" right="0.861328125" top="0.001953125" bottom="0.220703125"/>
				<Anchors>
					<Anchor point="BOTTOM" x="0" y="0"/>
				</Anchors>
			</Texture>
			<Texture parentKey="BannerBottomGlow" hidden="false" alpha="0" alphaMode="ADD" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="440" y="112"/>
				<TexCoords left="0.001953125" right="0.861328125" top="0.001953125" bottom="0.220703125"/>
				<Anchors>
					<Anchor point="BOTTOM" x="0" y="0"/>
				</Anchors>
			</Texture>	
		</Layer>
		<Layer level="BACKGROUND">
			<Texture parentKey="BannerMiddle" alpha="0" atlas="BossBanner-BgBanner-Mid" alphaMode="BLEND" useAtlasSize="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.BannerTop" x="0" y="-34"/>
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BannerBottom" x="0" y="25"/>
				</Anchors>
			</Texture>
			<Texture parentKey="BannerMiddleGlow" alpha="0" atlas="BossBanner-BgBanner-Mid" alphaMode="ADD" useAtlasSize="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.BannerTop" x="0" y="-34"/>
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BannerBottom" x="0" y="25"/>
				</Anchors>
			</Texture>
		</Layer>
		<Layer level="OVERLAY">
			<Texture parentKey="SkullCircle" hidden="false" alpha="0" alphaMode="BLEND" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="257" y="88"/>
				<TexCoords left="0.26" right="0.93" top="0.58" bottom="0.81"/>
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.BannerTop" x="0" y="54"/>
				</Anchors>
			</Texture>		
			<Texture parentKey="RedFlash" hidden="false" alpha="0" alphaMode="ADD" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="92" y="92"/>
				<TexCoords left="0.001953125" right="0.181640625" top="0.810546875" bottom="0.990234375"/>
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.SkullCircle" x="0" y="3"/>
				</Anchors>
			</Texture>
		</Layer>			
		<Layer level="ARTWORK">
			<FontString parentKey="Title" inherits="QuestFont_Enormous">
				<Anchors>
					<Anchor point="TOP" relativeKey="$parent.BannerTop" x="0" y="-47"/>
				</Anchors>
				<Color r="1" g="0.82" b="0" a="0"/>
			</FontString>
			<FontString parentKey="SubTitle" inherits="GameFontNormalLarge">
				<Anchors>
					<Anchor point="BOTTOM" relativeKey="$parent.BannerBottom" relativePoint="BOTTOM" x="0" y="0"/>
				</Anchors>
				<Color r="1" g="1" b="1" a="0"/>
			</FontString>
		</Layer>
		<Layer level="OVERLAY" textureSubLevel="2">
			<Texture parentKey="FlashBurst" hidden="false" alpha="0.01" alphaMode="ADD" atlas="BossBanner-RedLightning" useAtlasSize="true">
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.SkullCircle" x="15" y="-4"/>
				</Anchors>
			</Texture>
			<Texture parentKey="FlashBurstLeft" hidden="false" alpha="0.01" alphaMode="ADD" atlas="BossBanner-RedLightning" useAtlasSize="true">
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.SkullCircle" x="-15" y="-4"/>
				</Anchors>
			</Texture>
		</Layer>
		<Layer level="OVERLAY" textureSubLevel="3">
			<Texture parentKey="FlashBurstCenter" hidden="false" alpha="0.01" alphaMode="ADD" atlas="BossBanner-RedLightning" useAtlasSize="true">
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.SkullCircle"/>
				</Anchors>
			</Texture>
		</Layer>
		<Layer level="OVERLAY" textureSubLevel="4">
			<Texture parentKey="RedFlash" hidden="false" alpha="0.01" alphaMode="ADD" file="Interface/AddOns/DiceMaster/Texture/league-banner">
				<Size x="92" y="92"/>
				<TexCoords left="0.001953125" right="0.181640625" top="0.810546875" bottom="0.990234375"/>
				<Anchors>
					<Anchor point="CENTER" relativeKey="$parent.SkullCircle" x="1" y="-3"/>
				</Anchors>
			</Texture>
		</Layer>
	</Layers>
	<Animations>
		<AnimationGroup parentKey="AnimIn" setToFinalAlpha="true">
			<Scale childKey="SkullCircle" duration="0.15" order="1" fromScaleX="5" fromScaleY="5" toScaleX="1" toScaleY="1"/>
			<Alpha childKey="SkullCircle" duration="0.1" order="1" fromAlpha="0" toAlpha="1"/>
			<Alpha childKey="BannerTop" startDelay="0.2" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerTop" startDelay="0.1" duration="0.3" order="2" fromScaleX="0.1" fromScaleY="1" toScaleX="1" toScaleY="1"/>
			<Alpha childKey="BannerBottom" startDelay="0.2" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerBottom" startDelay="0.1" duration="0.3" order="2" fromScaleX="0.1" fromScaleY="1" toScaleX="1" toScaleY="1"/>
			<Alpha childKey="BannerMiddle" startDelay="0.2" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerMiddle" startDelay="0.1" duration="0.3" order="2" fromScaleX="0.1" fromScaleY="1" toScaleX="1" toScaleY="1"/>
			<Alpha childKey="BannerTopGlow" startDelay="0.9" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerTopGlow" startDelay="0.9" duration="0.5" order="2" fromScaleX="0.5" fromScaleY="1" toScaleX="1.6" toScaleY="1"/>
			<Alpha childKey="BannerTopGlow" startDelay="1.1" duration="0.6" order="2" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="BannerBottomGlow" startDelay="0.9" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerBottomGlow" startDelay="0.9" duration="0.5" order="2" fromScaleX="0.5" fromScaleY="1" toScaleX="1.6" toScaleY="1"/>
			<Alpha childKey="BannerBottomGlow" startDelay="1.1" duration="0.6" order="2" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="BannerMiddleGlow" startDelay="0.9" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="BannerMiddleGlow" startDelay="0.9" duration="0.5" order="2" fromScaleX="0.5" fromScaleY="1" toScaleX="1.6" toScaleY="1"/>
			<Alpha childKey="BannerMiddleGlow" startDelay="1.1" duration="0.6" order="2" fromAlpha="1" toAlpha="0"/>							
			<Alpha childKey="Title" startDelay="0.2" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Alpha childKey="SubTitle" startDelay="0.2" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>

			<Alpha childKey="RedFlash" duration="0.1" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="RedFlash" smoothing="IN" duration="0.25" order="2" fromScaleX="2.5" fromScaleY="2.5" toScaleX="1" toScaleY="1"/>
			<Alpha childKey="RedFlash" startDelay="0.25" duration="0.5" order="2" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="FlashBurst" startDelay="0.25" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="FlashBurst" startDelay="0.25" duration="0.4" order="2" fromScaleX="1" fromScaleY="0.75" toScaleX="1.25" toScaleY="0.75">
				<Origin point="LEFT">
					<Offset x="0" y="0"/>
				</Origin>
			</Scale>
			<Translation childKey="FlashBurst" startDelay="0.25" duration="0.5" order="2" offsetX="10" offsetY="0"/>
			<Alpha childKey="FlashBurst" startDelay="0.25" duration="0.4" order="2" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="FlashBurstLeft" startDelay="0.25" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="FlashBurstLeft" startDelay="0.25" duration="0.5" order="2" fromScaleX="1" fromScaleY="0.75" toScaleX="1.25" toScaleY="0.75">
				<Origin point="RIGHT">
					<Offset x="0" y="0"/>
				</Origin>
			</Scale>
			<Translation childKey="FlashBurstLeft" startDelay="0.25" duration="0.5" order="2" offsetX="-10" offsetY="0"/>
			<Alpha childKey="FlashBurstLeft" startDelay="0.25" duration="0.5" order="2" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="FlashBurstCenter" startDelay="0.25" duration="0.25" order="2" fromAlpha="0" toAlpha="1"/>
			<Scale childKey="FlashBurstCenter" startDelay="0.25" duration="0.5" order="2" fromScaleX="1" fromScaleY="1" toScaleX="1.25" toScaleY="1.25"/>
			<Alpha childKey="FlashBurstCenter" startDelay="0.25" duration="0.5" order="2" fromAlpha="1" toAlpha="0"/>
			
			<Scripts>
				<OnPlay>
					local banner = self:GetParent();
					banner:Show();
					banner.BannerTop:SetAlpha(0);
					banner.BannerBottom:SetAlpha(0);
					banner.BannerMiddle:SetAlpha(0);
					banner.Title:SetAlpha(0);
					banner.SubTitle:SetAlpha(0);
					banner.FlashBurst:SetAlpha(0);
					banner.FlashBurstLeft:SetAlpha(0);
					banner.FlashBurstCenter:SetAlpha(0);
					banner.RedFlash:SetAlpha(0);
					PlaySound(SOUNDKIT.UI_PERSONAL_LOOT_BANNER);
				</OnPlay>
				<OnFinished>
				</OnFinished>
			</Scripts>
		</AnimationGroup>
		<AnimationGroup parentKey="AnimSwitch" setToFinalAlpha="true">
			<Alpha childKey="SkullCircle" duration="0.5" order="1" fromAlpha="1" toAlpha="0"/>
			<Alpha childKey="Title" duration="0.25" order="1" fromAlpha="1" toAlpha="0"/>	
			<Alpha childKey="SubTitle" duration="0.25" order="1" fromAlpha="1" toAlpha="0"/>	
		</AnimationGroup>
		<AnimationGroup parentKey="AnimOut">
			<Alpha duration="0.5" order="1" fromAlpha="1" toAlpha="0"/>
			<Scripts>
				<OnFinished>
					local banner = self:GetParent();
					banner:Hide();
					banner:SetHeight(banner.baseHeight);
					banner.BannerTop:SetAlpha(0);
					banner.BannerBottom:SetAlpha(0);
					banner.BannerMiddle:SetAlpha(0);
					banner.Title:SetAlpha(0);
					banner.SubTitle:SetAlpha(0);
					banner.FlashBurst:SetAlpha(0);
					banner.FlashBurstLeft:SetAlpha(0);
					banner.FlashBurstCenter:SetAlpha(0);
					banner.RedFlash:SetAlpha(0);
				</OnFinished>
			</Scripts>
		</AnimationGroup>
	</Animations>
	<Scripts>
		<OnLoad>
			self.baseHeight = self:GetHeight();
		</OnLoad>
		<OnUpdate function="BossBanner_OnUpdate"/>
	</Scripts>
</Frame>
  
  <Frame name="DiceMasterRollFrame" parent="UIParent" inherits="ButtonFrameTemplate" hidden="true" framestrata="LOW">
    <Size x="265" y="384" />
    <Anchors>
      <Anchor point="LEFT" x="300" y="100" />
    </Anchors>
    
    <Scripts>
      <OnLoad>
		DiceMaster4.DiceMasterRollFrame_OnLoad( self )
		PanelTemplates_SetNumTabs(self, 2);
	    PanelTemplates_SetTab(self, 1);
	  </OnLoad>
	  <OnHide>
		if DiceMaster4.db.global.hideTracker then
			DiceMaster4.db.global.hideTracker = false
			DiceMaster4.configOptions.args.trackerScale.hidden = true
		end
	  </OnHide>
    </Scripts>
    <Frames>
		<Frame name="DiceMasterRollTracker" setAllPoints="true" hidden="false">
			<Frames>
				<Frame name="DiceMasterRollTrackerListInset" inherits="InsetFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-80"/>
						<Anchor point="BOTTOMRIGHT" x="-5" y="26"/>
					</Anchors>
					<Layers>
						<Layer level="ARTWORK">
							<FontString name="DiceMasterRollTrackerTotals" inherits="GameFontNormalSmall">
								<Size x="298" y="16"/>
								<Anchors>
									<Anchor point="BOTTOM" x="0" y="5"/>
								</Anchors>
							</FontString>
						</Layer>
					</Layers>
				</Frame>
				
				<!-- Target Selector -->
				<Button name="$parentSelectTarget" parentKey="selectTarget" enableMouse="true" inherits="UIDropDownMenuTemplate">
					<Size x="32" y="22"/>
					<Anchors>
					  <Anchor point="TOPLEFT" relativeTo="DiceMasterRollTracker" relativePoint="TOPLEFT" x="42" y="-26"/> 
					</Anchors>
					<Scripts>
					  <OnLoad>
						UIDropDownMenu_Initialize( self, DiceMaster4.RollTargetDropDown_OnLoad )
						UIDropDownMenu_SetText(DiceMasterRollTracker.selectTarget, "") 
						UIDropDownMenu_SetWidth(self, 32, 5)
					  </OnLoad>
					</Scripts>
				</Button>
				
				<EditBox name="$parentDCThreshold" parentKey="DCThreshold" font="GameFontNormalMed2" inherits="InputBoxTemplate">
					<Size x="30" y="12"/> 
					<Anchors>
					  <Anchor point="TOPRIGHT" relativeTo="DiceMasterRollTracker" relativePoint="TOPRIGHT" x="-16" y="-34"/> 
					</Anchors>
					<Layers>
						<Layer level="ARTWORK">
					  <FontString name="$parentDCThresholdTitle" inherits="GameFontNormalLeft" justifyH="left" text="Difficulty Class:">
							<Size x="100" y="12"/>
							<Anchors>
							  <Anchor point="RIGHT" relativePoint="LEFT" x="0" y="0"/> 
							</Anchors>
						</FontString>
					  </Layer>
					</Layers>
					<Scripts> 
					  <OnLoad>
						self:SetAutoFocus( false )
						self:SetTextColor( 1, 1, 1 )
						self:SetMaxLetters( 3 )
						self:SetNumeric( true )
					  </OnLoad>
					  <OnTextChanged>
						DiceMaster4.DiceMasterRollFrame_Update()
						DiceMaster4.DiceMasterRollDetailFrame_Update()
						if self:GetText()~= "" then
							DiceMasterRollTrackerListResultsButton:Enable()
						else
							DiceMasterRollTrackerListResultsButton:Disable()
						end
					  </OnTextChanged>
					  <OnEscapePressed function="EditBox_ClearFocus"/>
					  <OnEnterPressed function="EditBox_ClearFocus"/>
					</Scripts>
				</EditBox>

				<Button name="RollTrackerColumnHeader1" inherits="WhoFrameColumnHeaderTemplate" text="Name">
					<Anchors>
						<Anchor point="TOPLEFT" x="7" y="-57"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 83);
							self.sortType = "name";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader2" inherits="WhoFrameColumnHeaderTemplate" text="Roll">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader1" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 42);
							self.sortType = "roll";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader3" inherits="WhoFrameColumnHeaderTemplate" text="Timestamp">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader2" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 73);
							self.sortType = "time";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="RollTrackerColumnHeader4" inherits="WhoFrameColumnHeaderTemplate" text="Target">
					<Anchors>
						<Anchor point="LEFT" relativeTo="RollTrackerColumnHeader3" relativePoint="RIGHT" x="-2" y="0"/>
					</Anchors>
					<Scripts>
						<OnLoad>
							WhoFrameColumn_SetWidth(self, 52);
							self.sortType = "target";
							self.reversed = false;
						</OnLoad>
						<OnClick>
							DiceMaster4.SortRolls( self, self.reversed, self.sortType )
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<Button name="DiceMasterRollTrackerButton1" inherits="DiceMasterRollTrackerButtonTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="DiceMasterRollTracker" x="2" y="-82"/>
						</Anchors>
				</Button>
				
				<Button name="$parentListResultsButton" inherits="UIPanelButtonTemplate" text="List Results...">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-6" y="4"/>
					</Anchors>
					<Scripts>
						<OnLoad>
						UIDropDownMenu_Initialize( self, DiceMaster4.RollListDropDown_OnLoad )
						
						UIDropDownMenu_SetWidth(self, 85, 5)
						self:SetHeight(22)
					  </OnLoad>
						<OnClick>
							UIDropDownMenu_Initialize( self, DiceMaster4.RollListDropDown_OnLoad )
							ToggleDropDownMenu(1, nil, self, self, 0, 0)
							self:SetHeight(22)
						</OnClick>
					</Scripts>
				</Button>
				<Button name="$parentBannerButton" inherits="UIPanelButtonTemplate" text="Roll Prompt">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="RIGHT" relativeTo="DiceMasterRollTrackerListResultsButton" relativePoint="LEFT" x="2" y="0"/>
					</Anchors>
					<Scripts>
						<OnClick>
							if UnitIsGroupLeader("player", "LE_PARTY_CATEGORY_HOME") then
								StaticPopup_Show("DICEMASTER4_ROLLBANNER")
							end
						</OnClick>
						<OnUpdate>
							if UnitIsGroupLeader("player", "LE_PARTY_CATEGORY_HOME") and DiceMaster4.PermittedUse() then
								self:Enable()
							else
								self:Disable()
							end
						</OnUpdate>
					</Scripts>
				</Button>
				<Button name="$parentRefreshButton" inherits="UIPanelButtonTemplate" text="Clear">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeTo="DiceMasterRollFrame" x="4" y="4"/>
					</Anchors>
					<Scripts>
						<OnClick>
							DiceMaster4.SavedRolls = {}
							DiceMasterRollTracker.selected = nil;
							DiceMaster4.DiceMasterRollFrame_Update()
							DiceMasterRollFrame.DetailFrame:Hide()
							PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
						</OnClick>
					</Scripts>
				</Button>
				
				<ScrollFrame name="$parentScrollFrame" inherits="FauxScrollFrameTemplate">
					<Size x="256" y="270"/>
					<Anchors>
						<Anchor point="TOPRIGHT" relativeTo="DiceMasterRollTracker" relativePoint="TOPRIGHT" x="-33" y="-87"/>
					</Anchors>
					<Scripts>
						<OnVerticalScroll>
							FauxScrollFrame_OnVerticalScroll(self, offset, 16, DiceMaster4.DiceMasterRollFrame_Update);
						</OnVerticalScroll>
					</Scripts>
					<Layers>
						<Layer level="BORDER">
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="256"/>
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-2" y="5"/>
								</Anchors>
								<TexCoords left="0" right="0.484375" top="0" bottom="1.0"/>
							</Texture>
							<Texture file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar">
								<Size x="31" y="106"/>
								<Anchors>
									<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="-2" y="-2"/>
								</Anchors>
								<TexCoords left="0.515625" right="1.0" top="0" bottom="0.4140625"/>
							</Texture>
						</Layer>
					</Layers>
				</ScrollFrame>

			</Frames>
			<Scripts>
				<OnLoad>
				</OnLoad>
			</Scripts>
		</Frame>
		
		<Frame name="DiceMasterDMNotes" setAllPoints="true" hidden="true">
			<Frames>
				<Frame name="DiceMasterDMNotesInset" inherits="InsetFrameTemplate">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-60"/>
						<Anchor point="BOTTOMRIGHT" x="-5" y="26"/>
					</Anchors>
					<Layers>
						<Layer level="ARTWORK">
							<FontString name="DiceMasterRollTrackerTotals" inherits="GameFontNormalSmall">
								<Size x="298" y="16"/>
								<Anchors>
									<Anchor point="BOTTOM" x="0" y="5"/>
								</Anchors>
							</FontString>
						</Layer>
					</Layers>
				</Frame>
				
				<CheckButton name="$parentAllowAssistants" parentKey="AllowAssistants" inherits="ChatConfigCheckButtonTemplate">
					<Anchors>
					  <Anchor point="TOPLEFT" x="60" y="-30" />
					</Anchors>
					
					<Scripts>
						<OnLoad>
							_G[self:GetName().."Text"]:SetText("|cFFFFD100Allow Raid Assistants to Edit")
							self.tooltip = "Allows your raid assistants to edit your notes."
							self:Hide()
						</OnLoad>
						<OnClick>
							if DiceMaster4.IsLeader() then
								DiceMaster4.RollTracker_ShareNoteWithParty()
							end
						</OnClick>
					</Scripts>
				</CheckButton>
				
				<ScrollFrame name="$parentDMNotes" parentKey="DMNotes" inherits="UIPanelScrollFrameTemplate2">
					<KeyValues>
						<KeyValue key="safeLength" value="4000" type="number"/>
					</KeyValues>
					<Anchors>
						<Anchor point="TOPLEFT" x="10" y="-65"/>
						<Anchor point="BOTTOMRIGHT" x="-10" y="30"/>
					</Anchors>
					<Scripts>
					  <OnLoad>
						self.ScrollBar:ClearAllPoints()
						self.ScrollBar:SetPoint("TOPLEFT", self, "TOPRIGHT", -13, -11)
						self.ScrollBar:SetPoint("BOTTOMLEFT", self, "BOTTOMRIGHT", -13, 9)
						self.ScrollBar.ScrollDownButton:SetPoint("TOP", self.ScrollBar, "BOTTOM", 0, 4)
						self.ScrollBar.ScrollUpButton:SetPoint("BOTTOM", self.ScrollBar, "TOP", 0, -4)
						self.ScrollBar.ScrollUpButton:Disable()
						self.ScrollBar.ScrollDownButton:Disable()
					  </OnLoad>
					  <OnMouseDown>
						if self.EditBox then
							self.EditBox:SetFocus()
							self.EditBox:SetCursorPosition(#self.EditBox:GetText())
						end
					  </OnMouseDown>
					</Scripts>
					<ScrollChild>
					  <EditBox parentKey="EditBox" multiLine="true" font="GameFontHighlightSmall2">
						<Size x="220" y="12"/>
						<Anchors>
						  <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="5" y="5"/>  
						</Anchors>
						<Layers>
							<Layer level="BORDER">
								<FontString parentKey="Instructions" inherits="GameFontWhite" justifyH="LEFT" justifyV="TOP">
									<Anchors>
										<Anchor point="TOPLEFT"/>
										<Anchor point="RIGHT"/>
										<Anchor point="BOTTOM" relativeKey="$parent.$parent"/>
									</Anchors>
									<Color r="0.5" g="0.5" b="0.5"/>
								</FontString>
							</Layer>
						</Layers>
						<Scripts>
						  <OnLoad>
							self:SetAutoFocus( false )
							self:GetParent():SetScrollChild( self )
							self:SetMaxLetters( 4000 )
							self:Disable()
							self.Instructions:SetText("Record public notes here that the rest of your group can see. Only the group leader can edit these notes.|n|nEnable the option above to grant raid assistants editing privileges.")
						  </OnLoad>
						  <OnEditFocusGained function="DiceMasterNotesEditBox_OnEditFocusGained"/>
						  <OnEditFocusLost function="DiceMasterNotesEditBox_OnEditFocusLost"/>
						  <OnTextChanged function="DiceMasterNotesEditBox_OnTextChanged"/>
						  <OnCursorChanged function="ScrollingEdit_OnCursorChanged"/>
						  <OnUpdate function="ScrollingEdit_OnUpdate"/>
						  <OnEscapePressed function="EditBox_ClearFocus"/>
						</Scripts>
					  </EditBox>
					</ScrollChild>
				</ScrollFrame>
				
				<Button name="$parentClearButton" inherits="UIPanelButtonTemplate" text="Clear">
					<Size x="85" y="22"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-6" y="4"/>
					</Anchors>
					<Scripts>
						<OnClick>
							self:GetParent().DMNotes.EditBox:SetText("")
							self:GetParent().DMNotes.EditBox:ClearFocus()
						</OnClick>
						<OnUpdate>
							if DiceMaster4.IsLeader() then
								self:Enable()
							else
								self:Disable()
							end
						</OnUpdate>
					</Scripts>
				</Button>

			</Frames>
			<Scripts>
				<OnLoad>
				</OnLoad>
			</Scripts>
		</Frame>
		
		<Button name="$parentTab1" parentKey="Tab1" useParentLevel="true" inherits="CharacterFrameTabButtonTemplate" id="1" text="Roll Tracker">
			<Anchors>
				<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" y="2"/>
			</Anchors>
			<Scripts>
				<OnClick>
					PanelTemplates_SetTab(DiceMasterRollFrame, 1);
                    DiceMasterRollTracker:Show();
                    DiceMasterDMNotes:Hide();
				</OnClick>
			</Scripts>
		</Button>
		
		<Button name="$parentTab2" parentKey="Tab2" useParentLevel="true" inherits="CharacterFrameTabButtonTemplate" id="2" text="Notes">
			<Anchors>
				<Anchor point="LEFT" relativeKey="$parent.Tab1" relativePoint="RIGHT" x="-16"/>
			</Anchors>
			<Scripts>
				<OnClick>
					PanelTemplates_SetTab(DiceMasterRollFrame, 2);
                    DiceMasterRollTracker:Hide();
                    DiceMasterDMNotes:Show();
				</OnClick>
			</Scripts>
		</Button>
	
		<Frame parentKey="DetailFrame" frameLevel="100" inherits="DiceMasterRollTrackerDetailFrameTemplate" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" x="-8" y="-76"/>
				</Anchors>
				<Frames>
					<Button name="DiceMasterRollTrackerHistoryButton1" inherits="DiceMasterRollTrackerHistoryButtonTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeKey="$parentKey.DetailFrame" x="12" y="-75"/>
						</Anchors>
					</Button>
				</Frames>
		</Frame>
	
	</Frames>
</Frame>
</Ui>
